<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  padding: 2rem;
}
.container {
  max-width: 1000px;
  margin: auto;
}
h1 { margin-bottom: 1rem; }

.card {
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 2rem;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

input, button {
  padding: .6rem;
  margin: .3rem 0;
  width: 100%;
}

button {
  background: #1a9e8c;
  color: white;
  border: none;
  cursor: pointer;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: .6rem;
  border-bottom: 1px solid #ddd;
  text-align: left;
}

.actions a {
  margin-right: .5rem;
  text-decoration: none;
  font-weight: bold;
}

.edit { color: #1a9e8c; }
.delete { color: red; }
</style>
</head>

<body>
<div class="container">

<h1>Admin Panel</h1>
<p>Total Questions: <b th:text="${questionCount}"></b></p>

<!-- ADD / EDIT FORM -->
<div class="card">
<h2 th:text="${question.id == null ? 'Add Question' : 'Edit Question'}"></h2>

<form th:action="@{/admin/save}" th:object="${question}" method="post">

  <!-- IMPORTANT: Hidden ID for edit -->
  <input type="hidden" th:field="*{id}"/>

  <input type="text" th:field="*{questionText}" placeholder="Question" required>
  <input type="text" th:field="*{option1}" placeholder="Option 1" required>
  <input type="text" th:field="*{option2}" placeholder="Option 2" required>
  <input type="text" th:field="*{option3}" placeholder="Option 3" required>
  <input type="text" th:field="*{option4}" placeholder="Option 4" required>
  <input type="number" th:field="*{correctAnswer}" min="1" max="4" placeholder="Correct Option (1â€“4)" required>

  <button type="submit">
    <span th:text="${question.id == null ? 'Add Question' : 'Update Question'}"></span>
  </button>
</form>
</div>

<!-- QUESTION LIST -->
<div class="card">
<h2>All Questions</h2>

<table>
<thead>
<tr>
  <th>#</th>
  <th>Question</th>
  <th>Correct</th>
  <th>Actions</th>
</tr>
</thead>

<tbody>
<tr th:each="q, stat : ${questions}">
  <td th:text="${stat.count}"></td>
  <td th:text="${q.questionText}"></td>
  <td th:text="${q.correctAnswer}"></td>
  <td class="actions">
    <a th:href="@{/admin/edit/{id}(id=${q.id})}" class="edit">Edit</a>
    <a th:href="@{/admin/delete/{id}(id=${q.id})}"
       class="delete"
       onclick="return confirm('Delete this question?')">Delete</a>
  </td>
</tr>
</tbody>
</table>
</div>

</div>
</body>
</html>
