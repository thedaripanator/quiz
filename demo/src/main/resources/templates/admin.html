<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Admin Panel</title>

<style>
body{
  font-family:Inter,Arial;
  background:#f5f7f7;
}
.container{
  max-width:1100px;
  margin:auto;
  padding:2rem;
}
.card{
  background:white;
  padding:1.5rem;
  border-radius:10px;
  margin-bottom:2rem;
}
h2{margin-bottom:1rem}
input{
  width:100%;
  padding:8px;
  margin:6px 0;
}
button{
  padding:8px 14px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.save{background:#1a9e8c;color:white}
.edit{background:#2a8a9e;color:white}
.delete{background:#dc4545;color:white}
table{
  width:100%;
  border-collapse:collapse;
}
th,td{
  padding:10px;
  border-bottom:1px solid #ddd;
}
</style>
</head>

<body>
<div class="container">

<!-- HEADER -->
<div class="card">
  <h2>Admin Dashboard</h2>
  <p>Total Questions: <strong th:text="${questionCount}"></strong></p>
  <a href="/logout">Logout</a>
</div>

<!-- ADD / EDIT FORM -->
<div class="card">
  <h2 th:text="${question.id == null ? 'Add Question' : 'Edit Question'}"></h2>

  <form th:action="@{/admin/save}" method="post" th:object="${question}">
    <input type="hidden" th:field="*{id}">

    <input type="text" th:field="*{questionText}" placeholder="Question" required>
    <input type="text" th:field="*{option1}" placeholder="Option 1" required>
    <input type="text" th:field="*{option2}" placeholder="Option 2" required>
    <input type="text" th:field="*{option3}" placeholder="Option 3" required>
    <input type="text" th:field="*{option4}" placeholder="Option 4" required>
    <input type="number" th:field="*{correctAnswer}" min="1" max="4" placeholder="Correct Option (1-4)" required>

    <button class="save" type="submit">Save</button>
  </form>
</div>

<!-- QUESTION LIST -->
<div class="card">
  <h2>All Questions</h2>

  <table>
    <tr>
      <th>ID</th>
      <th>Question</th>
      <th>Correct</th>
      <th>Actions</th>
    </tr>

    <tr th:each="q : ${questions}">
      <td th:text="${q.id}"></td>
      <td th:text="${q.questionText}"></td>
      <td th:text="${q.correctAnswer}"></td>
      <td>
        <a th:href="@{/admin/edit/{id}(id=${q.id})}">
          <button class="edit">Edit</button>
        </a>
        <a th:href="@{/admin/delete/{id}(id=${q.id})}"
           onclick="return confirm('Delete this question?')">
          <button class="delete">Delete</button>
        </a>
      </td>
    </tr>
  </table>
</div>

</div>
</body>
</html>
